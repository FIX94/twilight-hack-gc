// Copyright 2008-2009  Segher Boessenkool  <segher@kernel.crashing.org>
// GameCube Port Copyright 2016 FIX94
// This code is licensed to you under the terms of the GNU GPL, version 2;
// see file LICENSE or http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt

#define XSTR(x) #x
#define ISTR(x) XSTR(x)

	.section .start,"ax"

	// Uninteresting stuff.
	.incbin "head.b"

	// "Link".  Overflow right at the title screen.
0:	.fill 0x148,1,'3'

addr8r12:
	// callback address we overwrite
	.long addr8r12
	// Padding for callback address
	.long 0
	// pointer to our callback code
	.long start

start:
	// Disable interrupts
	mfmsr 3 ; rlwinm 3,3,0,17,15 ; mtmsr 3

	// Go for it!
	b _main
